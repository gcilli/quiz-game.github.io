<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quiz Multiplayer</title>
    <link rel="stylesheet" href="css/styles.css">
</head>
<body>
    <div class="container">
        <!-- Home Screen -->
        <div id="homeScreen" class="screen active">
            <div class="button-group">
                <button id="createRoomBtn" class="btn btn-primary">Crea Stanza</button>
                <button id="joinRoomBtn" class="btn btn-secondary">Unisciti</button>
                <button id="backToMainBtn" class="btn btn-tertiary">‚Üê Men√π principale</button>
            </div>
        </div>

        <!-- Create Room Screen -->
        <div id="createRoomScreen" class="screen">
            <h2 style="margin-bottom: 2rem;">Crea una Stanza</h2>
            
            <form id="createRoomForm">
                <label>
                    <p><strong>Il tuo nome:</strong></p>
                    <input type="text" id="hostName">
                </label>
                
                <label>
                    <p><strong>Numero di domande:</strong></p>
                    <input id="numQuestions" type="number" min="1" max="100" value="10" required>
                </label>
                
                <label>
                    <p><strong>Tempo per domanda (secondi):</strong></p>
                    <input id="timerSetting" type="number" min="5" max="300" value="30" required>
                </label>
                
                <div class="button-group">
                    <button type="submit" class="btn btn-primary">Crea Stanza</button>
                    <button type="button" id="cancelCreateBtn" class="btn btn-tertiary">‚Üê Men√π principale</button>
                </div>
            </form>
        </div>

        <!-- Join Room Screen -->
        <div id="joinRoomScreen" class="screen">
            <h2 style="margin-bottom: 2rem;">Unisciti a una Stanza</h2>
            
            <form id="joinRoomForm">
                <label>
                    <p><strong>Il tuo nome:</strong></p>
                    <input type="text" id="playerName" maxlength="20">
                </label>
                
                <label>
                    <p><strong>Codice stanza:</strong></p>
                    <input type="text" id="roomCodeInput" maxlength="6" required placeholder="Es: ABC123" style="text-transform: uppercase;">
                </label>
                
                <div class="button-group">
                    <button type="submit" class="btn btn-primary">Unisciti</button>
                    <button type="button" id="cancelJoinBtn" class="btn btn-tertiary">‚Üê Men√π principale</button>
                </div>
            </form>
        </div>

        <!-- Lobby Screen -->
        <div id="lobbyScreen" class="screen">
            <h2>Stanza: <span id="roomCodeDisplay"></span></h2>
            
            <div id="lobbySettings" class="lobby-settings">
                <p><strong>Domande:</strong> <span id="lobbyNumQuestions"></span></p>
                <p><strong>Tempo:</strong> <span id="lobbyTimer"></span> secondi</p>
            </div>
            
            <h3 style="color: var(--text-color);">Giocatori (<span id="playerCount">0</span>):</h3>
            <div id="playersList" class="players-list"></div>
            
            <div class="button-group">
                <button id="startGameBtn" class="btn btn-primary" style="display: none;">Inizia Partita</button>
                <button id="leaveLobbyBtn" class="btn btn-tertiary">Esci</button>
            </div>
            
            <div id="waitingMessage" class="info-message" style="display: none;">
                In attesa che l'host avvii la partita...
            </div>
        </div>

        <!-- Game Screen -->
        <div id="gameScreen" class="screen">
            <div class="game-header">
                <div class="question-counter">
                    Domanda <span id="currentQuestionNum">1</span> di <span id="totalQuestions">10</span>
                </div>
                <div class="bookmark-btn-container">
                    <button id="mp-bookmark-btn" class="bookmark-btn" type="button">‚òÜ</button>
                </div>
                <div id="gameTimer" class="timer">30</div>
            </div>
            
            <div id="gameQuestion" class="question"></div>
            <div id="gameAnswers" class="answers"></div>
            
            <div id="answerFeedback" class="answer-feedback" style="display: none;">
                <p id="feedbackText"></p>
                <p id="feedbackPoints"></p>
            </div>
            
            <div class="mini-leaderboard">
                <h4>Classifica</h4>
                <div id="miniLeaderboard"></div>
            </div>
            
            <div id="waitingForPlayers" class="info-message" style="display: none;">
                In attesa degli altri giocatori...
            </div>
            
            <button id="nextQuestionBtn" class="btn btn-primary" style="display: none;">Prossima Domanda</button>
        </div>

        <!-- Results Screen -->
        <div id="resultsScreen" class="screen">
            <h2>üèÜ Risultati Finali</h2>
            
            <div id="finalLeaderboard" class="final-leaderboard"></div>
            
            <div class="button-group">
                <button id="playAgainBtn" class="btn btn-primary" style="display: none;">Gioca Ancora</button>
                <button id="backToHomeBtn" class="btn btn-secondary">Torna al Menu</button>
            </div>
        </div>
    </div>

    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-database-compat.js"></script>
    
    <!-- Application Scripts -->
    <script src="js/firebase-config.js"></script>
    <script src="js/storage.js"></script>
    <script src="js/multiplayer.js"></script>
</body>
</html>
