<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quiz Multiplayer</title>
    <link rel="stylesheet" href="css/styles.css">
</head>
<body>
    <div class="container">
        <!-- Home Screen -->
        <div id="homeScreen" class="screen active">
            <div class="header-container">
                <h1>üéÆ Quiz Multiplayer</h1>
                <div class="dark-mode-toggle-wrapper">
                    <label style="position: relative; cursor: pointer;">
                        <input type="checkbox" id="dark-mode-checkbox" class="dark-mode-checkbox">
                        <div class="toggle-switch">
                            <span class="toggle-icon sun-icon">‚òÄÔ∏è</span>
                            <span class="toggle-icon moon-icon">üåô</span>
                        </div>
                    </label>
                </div>
            </div>
            <p style="color: var(--text-color);">Sfida i tuoi amici in tempo reale!</p>
            
            <div class="button-group">
                <button id="createRoomBtn" class="btn btn-primary">Crea Stanza</button>
                <button id="joinRoomBtn" class="btn btn-secondary">Unisciti</button>
                <button id="backToMainBtn" class="btn btn-tertiary">‚Üê Men√π</button>
            </div>
        </div>

        <!-- Create Room Screen -->
        <div id="createRoomScreen" class="screen">
            <h2>Crea una Stanza</h2>
            
            <form id="createRoomForm">
                <div class="form-group">
                    <label for="hostName">Il tuo nome:</label>
                    <input type="text" id="hostName" maxlength="20" required placeholder="Inserisci il tuo nome">
                </div>
                
                <div class="form-group">
                    <label for="numQuestions">Numero di domande:</label>
                    <select id="numQuestions" required>
                        <option value="5">5 domande</option>
                        <option value="10" selected>10 domande</option>
                        <option value="15">15 domande</option>
                        <option value="20">20 domande</option>
                    </select>
                </div>
                
                <div class="form-group">
                    <label for="timerSetting">Tempo per domanda:</label>
                    <select id="timerSetting" required>
                        <option value="15">15 secondi</option>
                        <option value="30" selected>30 secondi</option>
                        <option value="45">45 secondi</option>
                        <option value="60">60 secondi</option>
                    </select>
                </div>
                
                <div class="button-group">
                    <button type="submit" class="btn btn-primary">Crea Stanza</button>
                    <button type="button" id="cancelCreateBtn" class="btn btn-tertiary">Annulla</button>
                </div>
            </form>
        </div>

        <!-- Join Room Screen -->
        <div id="joinRoomScreen" class="screen">
            <h2>Unisciti a una Stanza</h2>
            
            <form id="joinRoomForm">
                <div class="form-group">
                    <label for="playerName">Il tuo nome:</label>
                    <input type="text" id="playerName" maxlength="20" required placeholder="Inserisci il tuo nome">
                </div>
                
                <div class="form-group">
                    <label for="roomCodeInput">Codice stanza:</label>
                    <input type="text" id="roomCodeInput" maxlength="6" required placeholder="Es: ABC123" style="text-transform: uppercase;">
                </div>
                
                <div class="button-group">
                    <button type="submit" class="btn btn-primary">Unisciti</button>
                    <button type="button" id="cancelJoinBtn" class="btn btn-tertiary">Annulla</button>
                </div>
            </form>
        </div>

        <!-- Lobby Screen -->
        <div id="lobbyScreen" class="screen">
            <h2>Stanza: <span id="roomCodeDisplay"></span></h2>
            
            <div id="lobbySettings" class="lobby-settings">
                <p><strong>Domande:</strong> <span id="lobbyNumQuestions"></span></p>
                <p><strong>Tempo:</strong> <span id="lobbyTimer"></span> secondi</p>
            </div>
            
            <h3 style="color: var(--text-color);">Giocatori (<span id="playerCount">0</span>):</h3>
            <div id="playersList" class="players-list"></div>
            
            <div class="button-group">
                <button id="startGameBtn" class="btn btn-primary" style="display: none;">Inizia Partita</button>
                <button id="leaveLobbyBtn" class="btn btn-tertiary">Esci</button>
            </div>
            
            <div id="waitingMessage" class="info-message" style="display: none;">
                In attesa che l'host avvii la partita...
            </div>
        </div>

        <!-- Game Screen -->
        <div id="gameScreen" class="screen">
            <div class="game-header">
                <div class="question-counter">
                    Domanda <span id="currentQuestionNum">1</span> di <span id="totalQuestions">10</span>
                </div>
                <div id="gameTimer" class="timer">30</div>
            </div>
            
            <div id="gameQuestion" class="question"></div>
            <div id="gameAnswers" class="answers"></div>
            
            <div id="answerFeedback" class="answer-feedback" style="display: none;">
                <p id="feedbackText"></p>
                <p id="feedbackPoints"></p>
            </div>
            
            <div class="mini-leaderboard">
                <h4>Classifica</h4>
                <div id="miniLeaderboard"></div>
            </div>
            
            <div id="waitingForPlayers" class="info-message" style="display: none;">
                In attesa degli altri giocatori...
            </div>
            
            <button id="nextQuestionBtn" class="btn btn-primary" style="display: none;">Prossima Domanda</button>
        </div>

        <!-- Results Screen -->
        <div id="resultsScreen" class="screen">
            <h2>üèÜ Risultati Finali</h2>
            
            <div id="finalLeaderboard" class="final-leaderboard"></div>
            
            <div class="button-group">
                <button id="playAgainBtn" class="btn btn-primary" style="display: none;">Gioca Ancora</button>
                <button id="backToHomeBtn" class="btn btn-secondary">Torna al Menu</button>
            </div>
        </div>
    </div>

    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-database-compat.js"></script>
    
    <!-- Application Scripts -->
    <script src="js/firebase-config.js"></script>
    <script src="js/storage.js"></script>
    <script src="js/multiplayer.js"></script>
</body>
</html>
